# IMDB Series Rating Scraper

## Introduction

This tool scrapes the website https://www.imdb.com for ratings of individual episodes of a series.
A csv file is generated to cache the ratings.
Using matplotlib, the tool then generates a heatmap representation of all episodes in the series.

| ![](examples/img/Dark.png)  |  ![](examples/img/Breaking_Bad.png)  |
|---------|-----|
| ![](examples/img/Game_Of_Thrones.png) | ![](examples/img/Navy_CIS.png) |

## Examples

### Data output

The following table shows transposed data for the series "Breaking Bad" which is generated by the scraper and saved to the csv file under `data/Breaking Bad.csv`.

| season  | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 2   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 3   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 4   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5   | 5    | 5   | 5   |
|---------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|------|-----|-----|
| episode | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  | 14   | 15  | 16  |
| rating  | 9.0 | 8.6 | 8.7 | 8.2 | 8.3 | 9.3 | 8.8 | 8.6 | 9.3 | 8.3 | 8.2 | 8.3 | 8.8 | 8.6 | 9.2 | 9.1 | 8.5 | 8.9 | 9.3 | 9.2 | 8.5 | 8.6 | 8.4 | 8.2 | 8.6 | 9.3 | 9.6 | 8.7 | 8.4 | 7.8 | 8.4 | 9.5 | 9.6 | 9.2 | 8.2 | 8.0 | 8.6 | 8.6 | 8.4 | 8.8 | 9.2 | 8.8 | 9.6 | 9.7 | 9.5 | 9.9 | 9.2 | 8.8 | 8.8 | 8.8 | 9.7 | 9.0 | 9.5 | 9.6 | 9.4 | 9.2 | 9.6 | 9.1 | 9.8 | 10.0 | 9.7 | 9.9 |

### Heatmap output

The following image shows an example of the heatmap that can be generated from the above table data. 
The heatmap in this example saved to `heatmaps/Breaking Bad.png`. 

![](examples/img/Breaking_Bad.png)

## Quickstart

### Dependencies

- Python version `Python 3.9.13`
- Python packages see `requirements.txt`

### Setup

1. Clone this repository

| **HTTPS**  | `$ git clone https://github.com/trflorian/imdb-scraper-heatmap.git` |
| ---|---|
| **SSH** |`$ git clone git@github.com:trflorian/imdb-scraper-heatmap.git` |

3. (Optional) Create a virtual environment for this project 
4. Install the required python packages in your python environment.

`$ python -m pip install -r requirements.txt`

5. Run `$ python scraper.py` to scrape the IMDB website for a specific series.
6. Run `$ python heatmap.py` to create a plot for the scraped series.

### Usage

``` 
$ python .\heatmap.py --help

usage: heatmap.py [-h] [-s] [-d] [-o] [-n NAME]

optional arguments:
  -h, --help            show this help message and exit
  -s, --show            show the heatmap plot instead of saving it
  -d, --dark            use dark mode for the plot style
  -o, --override        override existing plots, only used if show flag is not set
  -n NAME, --name NAME  name of the series, if not set the whole data directory will be scanned
```

